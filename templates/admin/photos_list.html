{% extends "base.html" %}

{% block title %}Admin | Photos{% endblock %}

{% block content %}
<div class="admin-container">
  <h1>Photos</h1>

  <p>
    <a href="{{ url_for('admin.upload_photo') }}" class="btn btn-primary">
      Upload new photo
    </a>
  </p>

  {% if images %}
    <table class="table">
      <thead>
        <tr>
          <th>Preview</th>
          <th>Title</th>
          <th>Date</th>
          <th>Location</th>
          <th>Show on Map</th>
          <th>Lat / Lon</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for image in images %}
          <tr>
            <td>
              <img src="{{ url_for('static', filename='images/' ~ image.file) }}"
                   alt="{{ image.title or 'image ' ~ image.id }}"
                   style="max-width: 120px; max-height: 80px; object-fit: cover;">
            </td>
            <td>{{ image.title or '—' }}</td>
            <td>{{ image.date or '—' }}</td>
            <td>
              {% if image.location %}
                {{ image.location.name }}
              {% else %}
                <em>Unassigned</em>
              {% endif %}
            </td>
            <td>
              {% if image.show_on_map %}
                ✅
              {% else %}
                ❌
              {% endif %}
            </td>
            <td>
              {% if image.lat and image.lon %}
                {{ image.lat }}, {{ image.lon }}
              {% else %}
                —
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('admin.edit_photo', image_id=image.id) }}">Edit</a> |
              <a href="{{ url_for('admin.delete_photo', image_id=image.id) }}">Delete</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No photos found yet.</p>
  {% endif %}
</div>
{% endblock %}
